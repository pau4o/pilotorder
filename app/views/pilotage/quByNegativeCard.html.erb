<h3><%#= messages.getString("quByNegativeCard") %></h3>
<form method="post" onSubmit="return submitCheck()">
  <table cellpadding="0" cellspacing="0">
    <tr> 
      <td>
        <table>
          <tr>
            <td colspan="2"> 
              <%# mhash=beanManager.getHandy().getOptOfCriterias(); %>
              <select name="CriteriaID" multiple="multiple" size="5">
                <option value=0> -- ALL -- </option>
                <logic:iterate collection="<%#= mhash %>" id="mh" type="java.util.Map.Entry"> 
                  <option value="<bean:write name="mh" property="value" />" >
                    <bean:write name="mh" property="key" /> 
                  </option>
                </logic:iterate>
              </select>
              <select multiple="multiple" size="5" name="month">
                <option value=0> -- ALL -- </option>
                <%# String month; for (int i=1; i < 13; i++) { month=messages.getString("Month"+i); out.print("<option value=\""+i+"\">"+month); } %>
              </select>
              Year: 
              <input type="text" value="<%#= year %>" size="4" name="year" />
            </td>
            <td> 
              <input type="submit" name="go" value="Go" />
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr> 
      <td>
        <%# if (qbnc.getData().size()>0) { %>
                <a name="qtab"></a>
                <table cellpadding="0" cellspacing="0">
                  <thead>
                    <tr>
                      <%# ArrayList qd=qbnc.getData() ; int crit=0; int total=0; int grandtotal=0; String prefix="M"; ArrayList mans=qbnc.getMans(); int j=0; %>
                      <th><%#=messages.getString("Criteria")%></th>
                      <logic:iterate collection="<%#= qbnc.getMonths() %>" id="mon" type="String" > 
                        <th><%#= "M"+mon %><br /> <%#=mans.get(j++)%></th>
                      </logic:iterate> 
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tfoot>
                    <tr>
                      <th colspan="<%#=qbnc.getMonths().size()+1 %>" align="right">Grand Total:</th>
                      <th><%#= grandtotal %></th>
                    </tr>
                  </tfoot>
                  <tbody>
                    <logic:iterate collection="<%#= qd %>" id="per" type="java.util.ArrayList" > 
                      <%# total=0; %>
                      <tr> 
                        <td>
                          <%#=beanManager.getHandy().getCriteriaName(Integer.parseInt((String)qbnc.getCriterias().get(crit++))) %>
                        </td>
                        <logic:iterate collection="<%#= per %>" id="count" type="Integer" > 
                          <td><%#= count %></td>
                          <%# total += count.intValue(); %>
                        </logic:iterate> 
                        <td><%#= total %></td>
                        <%#  grandtotal += total ; %>
                      </tr>
                    </logic:iterate>
                  </tbody>
                </table>
                <%# } %>
            </td>
          </tr>
        </table>
</form>


